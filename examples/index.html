<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>pinboard.js</title>
        <meta name="viewport" content="width=device-width">
        <style>
            .pinboard-container {
                border: 1px solid #ddd;
                padding: 8px 4px 0;
                width: 80%;
            }
            .pinboard-item,
            .pinboard-placeholder {
                border: 1px solid #aaa;
                margin: 0 4px 8px;
                background-color: #fff;
            }
            .pinboard-item-hidden {
                opacity: .5;
                border-style: dashed;
            }
            .pinboard-placeholder {
                border-style: dashed;
            }
            .pinboard-item-header {
                background-color: #ddd;
                border-bottom: 1px solid #aaa;
            }
            .pinboard-sortable .pinboard-item-header {
                cursor: move;
            }
            .pinboard-item-header > * {
                padding: 4px 8px;
            }
            .pinboard-item-action {
                cursor: pointer;
            }
        </style>
    </head>
    <body>
        <!--[if lt IE 8]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <div id="dashboard">
            <div title="Item 1" style="padding:8px;height:125px">Hello Item 1!</div>
            <div title="Item 2" style="padding:8px">Hello Item 2!</div>
            <div style="padding:8px;height:75px">Hello Item 3!</div>
            <br/>
            <div title="Item 4" style="padding:8px;display:none">Hello Item 4!</div>
        </div>
        <button id="init">Init</button>
        <button id="setItems">SetItems</button>
        <button id="toggleHidden">ToggleHidden</button>
        <button id="toggleSorting">ToggleSorting</button>
        <button id="destroy">Destroy</button>

        <script id="frameItemTmpl" type="text/html"><% each item in items %><% if (!item.name) { %><br/><% } else { %><iframe title="<%= item.name %>" src="<%= item.url %>" frameborder="0" style="width:100%;height:<%= item.height %>px"></iframe><% }} %></script>

        <!-- Required -->
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script src="jquery.pinboard.js"></script>

        <!-- Optional -->
        <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/jquery-ui.min.js"></script>
        <script src="https://raw.github.com/furf/jquery-ui-touch-punch/master/jquery.ui.touch-punch.min.js"></script>
        <script src="https://raw.github.com/Khan/khan-mobile/master/js/tmpl.js"></script>

        <script>
            jQuery(function ($) {
                var testData = { items: [
                        { name: 'Frame 1', url: 'frame1.html', height: 100 },
                        { name: 'Frame 2', url: 'frame2.html', height: 200 },
                        {},
                        { name: 'Frame 3', url: 'frame3.html', height: 150 }
                    ]};

                $('#init').on('click', function () {
                    $('#dashboard').pinboard({
                        breaks: [480, 800, 1024],
                        hiding: true,
                        sortUpdate: sortUpdated
                    });
                });
                $('#setItems').on('click', function () {
                    $('#dashboard').pinboard('setItems', tmpl($('#frameItemTmpl').html(), testData));
                });
                $('#destroy').on('click', function () {
                    $('#dashboard').pinboard('destroy');
                });
                $('#toggleHidden').on('click', function () {
                    $('#dashboard').pinboard('toggleHidden');
                });
                $('#toggleSorting').on('click', function () {
                    $('#dashboard').pinboard('toggleSorting');
                });
                $(window).on('resize', function () {
                    $('#dashboard').pinboard('resize');
                });

                function sortUpdated (data) {
                    if (window.console && console.log) console.log('sortUpdate:', data);
                }
            });
        </script>
    </body>
</html>
